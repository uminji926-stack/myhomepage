<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Signal - ë¯¸ì†Œë…„ ì—°ì•  ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }

        .game-container {
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .start-screen {
            text-align: center;
            padding: 60px 40px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .start-screen h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .start-screen p {
            font-size: 1.2em;
            margin-bottom: 30px;
            opacity: 0.95;
        }

        .character-select {
            padding: 40px;
            display: none;
        }

        .character-select.active {
            display: block;
        }

        .select-title {
            text-align: center;
            font-size: 2em;
            color: #667eea;
            margin-bottom: 30px;
        }

        .characters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .character-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            text-align: center;
        }

        .character-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            border-color: #667eea;
        }

        .character-icon {
            font-size: 4em;
            margin-bottom: 10px;
        }

        .character-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .character-trait {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }

        .character-desc {
            font-size: 0.85em;
            color: #777;
            line-height: 1.4;
        }

        .game-screen {
            display: none;
        }

        .game-screen.active {
            display: block;
        }

        .game-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .character-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .current-character-icon {
            font-size: 2.5em;
        }

        .stats {
            display: flex;
            gap: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            font-size: 0.8em;
            opacity: 0.9;
        }

        .stat-value {
            font-size: 1.2em;
            font-weight: bold;
        }

        .scene-display {
            padding: 40px;
            min-height: 300px;
            background: linear-gradient(to bottom, #ffeef8 0%, #fff5fb 100%);
        }

        .scene-image {
            text-align: center;
            font-size: 8em;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .dialogue-box {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .speaker-name {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .dialogue-text {
            color: #333;
            line-height: 1.8;
            font-size: 1.05em;
        }

        .choices {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 0 40px 40px 40px;
        }

        .choice-btn {
            padding: 20px;
            border: none;
            border-radius: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 1.05em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            position: relative;
            overflow: hidden;
        }

        .choice-btn:before {
            content: 'ğŸ’–';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .choice-btn:hover {
            transform: translateX(10px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .choice-btn:hover:before {
            opacity: 1;
        }

        .ending-screen {
            display: none;
            text-align: center;
            padding: 60px 40px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .ending-screen.active {
            display: block;
        }

        .ending-icon {
            font-size: 6em;
            margin-bottom: 20px;
            animation: heartbeat 1.5s ease infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.1); }
            50% { transform: scale(1); }
        }

        .ending-title {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .ending-message {
            font-size: 1.2em;
            line-height: 1.8;
            margin-bottom: 30px;
            opacity: 0.95;
        }

        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: white;
            color: #667eea;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            margin-left: 10px;
        }

        .btn-secondary:hover {
            background: white;
            color: #667eea;
        }

        @media (max-width: 768px) {
            .start-screen h1 {
                font-size: 2em;
            }

            .characters-grid {
                grid-template-columns: 1fr;
            }

            .scene-display {
                padding: 20px;
            }

            .choices {
                padding: 0 20px 20px 20px;
            }

            .stats {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Start Screen -->
        <div class="start-screen" id="startScreen">
            <h1>ğŸ’• Heart Signal ğŸ’•</h1>
            <p>ë¯¸ì†Œë…„ë“¤ê³¼ì˜ ì„¤ë ˆëŠ” í•™ì› ë¡œë§¨ìŠ¤</p>
            <p style="font-size: 0.95em;">ë‹¹ì‹ ì˜ ì„ íƒì´ ìš´ëª…ì„ ê²°ì •í•©ë‹ˆë‹¤</p>
            <button class="btn btn-primary" onclick="showCharacterSelect()">ê²Œì„ ì‹œì‘</button>
        </div>

        <!-- Character Selection -->
        <div class="character-select" id="characterSelect">
            <h2 class="select-title">ğŸ’ ë§ˆìŒì„ í›”ì¹  ê·¸ë¥¼ ì„ íƒí•˜ì„¸ìš” ğŸ’</h2>
            <div class="characters-grid">
                <div class="character-card" onclick="selectCharacter('jun')">
                    <div class="character-icon">ğŸ¸</div>
                    <div class="character-name">ì´ì¤€</div>
                    <div class="character-trait">ì¿¨í•œ ë°´ë“œë¶€ ë³´ì»¬</div>
                    <div class="character-desc">ê²‰ìœ¼ë¡œëŠ” ì°¨ê°€ì›Œ ë³´ì´ì§€ë§Œ ì†ì€ ë”°ëœ»í•œ ì¸¤ë°ë ˆ íƒ€ì…</div>
                </div>
                <div class="character-card" onclick="selectCharacter('min')">
                    <div class="character-icon">ğŸ“š</div>
                    <div class="character-name">ê°•ë¯¼</div>
                    <div class="character-trait">ë‹¤ì •í•œ í•™ìƒíšŒì¥</div>
                    <div class="character-desc">í•­ìƒ ë¯¸ì†Œ ì§“ëŠ” ì™„ë²½í•œ ëª¨ë²”ìƒì´ì§€ë§Œ ë¹„ë°€ì´ ìˆë‹¤</div>
                </div>
                <div class="character-card" onclick="selectCharacter('han')">
                    <div class="character-icon">âš½</div>
                    <div class="character-name">ë°•í•œ</div>
                    <div class="character-trait">ë°œë„í•œ ì¶•êµ¬ë¶€ ì—ì´ìŠ¤</div>
                    <div class="character-desc">ë°ê³  ì¥ë‚œê¸° ë§ì€ ì†Œë…„ ê°™ì€ ë§¤ë ¥ì˜ ìŠ¤í¬ì¸ ë§¨</div>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div class="game-screen" id="gameScreen">
            <div class="game-header">
                <div class="character-info">
                    <div class="current-character-icon" id="currentIcon">ğŸ¸</div>
                    <div>
                        <div id="currentName" style="font-size: 1.3em; font-weight: bold;">ì´ì¤€</div>
                        <div id="currentTrait" style="font-size: 0.9em; opacity: 0.9;">ì¿¨í•œ ë°´ë“œë¶€ ë³´ì»¬</div>
                    </div>
                </div>
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">í˜¸ê°ë„</div>
                        <div class="stat-value"><span id="affection">0</span>ğŸ’–</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">ì—í”¼ì†Œë“œ</div>
                        <div class="stat-value"><span id="episode">1</span>/5</div>
                    </div>
                </div>
            </div>

            <div class="scene-display">
                <div class="scene-image" id="sceneImage">ğŸ«</div>
                <div class="dialogue-box">
                    <div class="speaker-name" id="speakerName">ë‚˜ë ˆì´ì…˜</div>
                    <div class="dialogue-text" id="dialogueText">í•™êµ ë³µë„ë¥¼ ê±·ê³  ìˆëŠ”ë°...</div>
                </div>
            </div>

            <div class="choices" id="choicesContainer">
                <!-- Choices will be inserted here -->
            </div>
        </div>

        <!-- Ending Screen -->
        <div class="ending-screen" id="endingScreen">
            <div class="ending-icon" id="endingIcon">ğŸ’˜</div>
            <h2 class="ending-title" id="endingTitle">True Love Ending</h2>
            <p class="ending-message" id="endingMessage">ë‘ ì‚¬ëŒì€ ì„œë¡œì˜ ë§ˆìŒì„ í™•ì¸í•˜ê³  ì˜ì›í•œ ì‚¬ë‘ì„ ì•½ì†í–ˆìŠµë‹ˆë‹¤.</p>
            <button class="btn btn-primary" onclick="restart()">ì²˜ìŒë¶€í„° ë‹¤ì‹œ</button>
            <button class="btn btn-secondary" onclick="showCharacterSelect()">ë‹¤ë¥¸ ìºë¦­í„° ì„ íƒ</button>
        </div>
    </div>

    <script>
        let currentCharacter = null;
        let affection = 0;
        let currentEpisode = 1;

        const characters = {
            jun: {
                name: 'ì´ì¤€',
                icon: 'ğŸ¸',
                trait: 'ì¿¨í•œ ë°´ë“œë¶€ ë³´ì»¬',
                story: [
                    {
                        scene: 'ğŸ«',
                        speaker: 'ì´ì¤€',
                        text: '(ì°¨ê°€ìš´ ëˆˆë¹›ìœ¼ë¡œ) ...ë­ì•¼, ì™œ ì³ë‹¤ë´?',
                        choices: [
                            { text: 'ì•„, ë¯¸ì•ˆí•´... ê·¸ëƒ¥ ë°´ë“œ ì—°ìŠµ ì†Œë¦¬ê°€ ì¢‹ì•„ì„œ', affection: 2 },
                            { text: 'ì•„ë¬´ê²ƒë„ ì•„ë‹ˆì•¼! (í™©ê¸‰íˆ ì§€ë‚˜ê°„ë‹¤)', affection: 0 },
                            { text: 'ë„¤ ê¸°íƒ€ ì—°ì£¼ ì •ë§ ë©‹ìˆë”ë¼', affection: 3 }
                        ]
                    },
                    {
                        scene: 'ğŸµ',
                        speaker: 'ì´ì¤€',
                        text: '(ë‹¹í™©í•œ ë“¯) ...ê³ ë§ˆì›Œ. ì‚¬ì‹¤ ë„¤ê°€ ë“¤ì–´ì¤€ ê±° ì•Œê³  ìˆì—ˆì–´.',
                        choices: [
                            { text: 'ë‚˜ë„ ìŒì•… ì¢‹ì•„í•´. ê°™ì´ ì—°ìŠµí• ë˜?', affection: 3 },
                            { text: 'ë‹¤ìŒì—ë„ ë“¤ì–´ê°€ë„ ë¼?', affection: 2 },
                            { text: '(ì¡°ìš©íˆ ë¯¸ì†Œë§Œ ì§“ëŠ”ë‹¤)', affection: 1 }
                        ]
                    },
                    {
                        scene: 'ğŸŒ™',
                        speaker: 'ì´ì¤€',
                        text: '(ì˜¥ìƒì—ì„œ) ë„ˆí•œí…Œë§Œ ë§í• ê²Œ... ë‚œ ì‚¬ëŒë“¤ ì•ì—ì„  ê¸´ì¥ë¼. ê·¼ë° ë„ˆ ì•ì—ì„  í¸í•´.',
                        choices: [
                            { text: 'ë‚˜ë„ ë„¤ ì˜†ì— ìˆìœ¼ë©´ í¸ì•ˆí•´', affection: 4 },
                            { text: 'ê±±ì • ë§ˆ. ë‚œ í•­ìƒ ë„¤ í¸ì´ì•¼', affection: 3 },
                            { text: 'ê·¸ëŸ¼ ìš°ë¦¬ ë” ìì£¼ ë³´ì', affection: 2 }
                        ]
                    },
                    {
                        scene: 'ğŸ¸',
                        speaker: 'ì´ì¤€',
                        text: '(ì§„ì§€í•˜ê²Œ) ë„ˆ ë•Œë¬¸ì— ìƒˆ ê³¡ ì¼ì–´. ë“¤ì–´ë³¼ë˜?',
                        choices: [
                            { text: 'ì •ë§? ì—„ì²­ ë“£ê³  ì‹¶ì–´!', affection: 3 },
                            { text: '(ë‘ê·¼ê±°ë¦¬ë©°) ì œëª©ì´ ë­”ë°?', affection: 4 },
                            { text: 'ë‚˜ë¥¼ ìœ„í•œ ê³¡ì´ë¼ë‹ˆ... ê³ ë§ˆì›Œ', affection: 5 }
                        ]
                    },
                    {
                        scene: 'ğŸ’•',
                        speaker: 'ì´ì¤€',
                        text: '(ìˆ˜ì¤ê²Œ ë¯¸ì†Œ ì§€ìœ¼ë©°) ...ì¢‹ì•„í•´. ì²˜ìŒ ë³¸ ìˆœê°„ë¶€í„°.',
                        choices: [
                            { text: 'ë‚˜ë„... ì •ë§ ì¢‹ì•„í•´', affection: 5 },
                            { text: '(ì†ì„ ì¡ìœ¼ë©°) ë‚˜ë„ ê°™ì€ ë§ˆìŒì´ì•¼', affection: 5 },
                            { text: 'ê¸°ë‹¤ë ¸ì–´, ì´ ë§ì„', affection: 5 }
                        ]
                    }
                ]
            },
            min: {
                name: 'ê°•ë¯¼',
                icon: 'ğŸ“š',
                trait: 'ë‹¤ì •í•œ í•™ìƒíšŒì¥',
                story: [
                    {
                        scene: 'ğŸ«',
                        speaker: 'ê°•ë¯¼',
                        text: '(ë°ê²Œ ì›ƒìœ¼ë©°) ì•ˆë…•! ë„ì„œê´€ ê°€ëŠ” ê¸¸ì´ì•¼?',
                        choices: [
                            { text: 'ì‘, ê°™ì´ ê°ˆë˜?', affection: 3 },
                            { text: 'í•™ìƒíšŒ ì¼ì€ ë‹¤ ëë‚¬ì–´?', affection: 2 },
                            { text: '(ê³ ê°œë§Œ ë„ë•ì¸ë‹¤)', affection: 0 }
                        ]
                    },
                    {
                        scene: 'ğŸ“–',
                        speaker: 'ê°•ë¯¼',
                        text: 'ë‚˜ ì‚¬ì‹¤... ì™„ë²½í•œ ì²™í•˜ëŠ” ê²Œ í˜ë“¤ ë•Œê°€ ìˆì–´.',
                        choices: [
                            { text: 'ë„Œ ìˆëŠ” ê·¸ëŒ€ë¡œë„ ì¶©ë¶„íˆ ë©‹ì ¸', affection: 4 },
                            { text: 'í˜ë“¤ ë• ë‚˜í•œí…Œ ë§í•´', affection: 3 },
                            { text: 'ê·¸ë˜ë„ ë„Œ ì •ë§ ëŒ€ë‹¨í•´', affection: 2 }
                        ]
                    },
                    {
                        scene: 'ğŸŒ¸',
                        speaker: 'ê°•ë¯¼',
                        text: '(ì§„ì‹¬ìœ¼ë¡œ) ë„ˆë‘ ìˆìœ¼ë©´ ë‚´ê°€ ë  ìˆ˜ ìˆì–´. ê³ ë§ˆì›Œ.',
                        choices: [
                            { text: 'ë‚˜ë„ ë„¤ ì˜†ì´ ì œì¼ í¸í•´', affection: 4 },
                            { text: 'í•­ìƒ ë„ˆ ìì‹ ìœ¼ë¡œ ìˆì–´ì¤˜', affection: 3 },
                            { text: '(ë”°ëœ»í•˜ê²Œ ì•ˆì•„ì¤€ë‹¤)', affection: 5 }
                        ]
                    },
                    {
                        scene: 'â˜•',
                        speaker: 'ê°•ë¯¼',
                        text: '(ë¶€ë“œëŸ½ê²Œ) ìš”ì¦˜ ë„ˆë§Œ ìƒê°í•´. ì´ê±°... ì‚¬ë‘ì¸ê°€ ë´.',
                        choices: [
                            { text: 'ë‚˜ë„... ë„ˆë§Œ ë³´ì—¬', affection: 5 },
                            { text: '(ì–¼êµ´ ë¹¨ê°œì§€ë©°) ë‚˜ë„ ê·¸ë˜', affection: 4 },
                            { text: 'ìš°ë¦¬ ê³„ì† í•¨ê»˜ ìˆì', affection: 3 }
                        ]
                    },
                    {
                        scene: 'ğŸ’',
                        speaker: 'ê°•ë¯¼',
                        text: '(ì†ì„ ì¡ìœ¼ë©°) ë‚´ ê³ì— ìˆì–´ì¤„ë˜? ì˜ì›íˆ.',
                        choices: [
                            { text: 'ë¬¼ë¡ ì´ì§€. ì‚¬ë‘í•´', affection: 5 },
                            { text: '(í‚¤ìŠ¤í•˜ë©°) ë‹¹ì—°í•˜ì§€', affection: 5 },
                            { text: 'í‰ìƒ í•¨ê»˜ í• ê²Œ', affection: 5 }
                        ]
                    }
                ]
            },
            han: {
                name: 'ë°•í•œ',
                icon: 'âš½',
                trait: 'ë°œë„í•œ ì¶•êµ¬ë¶€ ì—ì´ìŠ¤',
                story: [
                    {
                        scene: 'ğŸ«',
                        speaker: 'ë°•í•œ',
                        text: '(ë°ê²Œ) ì•¼í˜¸! ì˜¤ëŠ˜ ìš°ë¦¬ íŒ€ ê²½ê¸° ë³´ëŸ¬ ì˜¬ ê±°ì§€?',
                        choices: [
                            { text: 'ë‹¹ì—°í•˜ì§€! ê¼­ ì‘ì›í• ê²Œ', affection: 3 },
                            { text: 'ìŒ... ì‹œê°„ ë˜ë©´ ê°ˆê²Œ', affection: 1 },
                            { text: 'ë„ˆë§Œ ë³´ëŸ¬ ê°„ë‹¤!', affection: 4 }
                        ]
                    },
                    {
                        scene: 'âš½',
                        speaker: 'ë°•í•œ',
                        text: '(ê²½ê¸° í›„ ë•€ í˜ë¦¬ë©°) ë‚´ ê³¨... ë´¤ì§€? ë„ˆí•œí…Œ ë³´ì—¬ì£¼ê³  ì‹¶ì—ˆì–´!',
                        choices: [
                            { text: 'ì •ë§ ë©‹ìˆì—ˆì–´!', affection: 3 },
                            { text: '(íƒ€ì›” ê±´ë„¤ë©°) ìˆ˜ê³ í–ˆì–´', affection: 4 },
                            { text: 'ë„ˆ ì •ë§ ìµœê³ ì•¼!', affection: 2 }
                        ]
                    },
                    {
                        scene: 'ğŸŒŸ',
                        speaker: 'ë°•í•œ',
                        text: '(ì§„ì§€í•˜ê²Œ) ì‚¬ì‹¤ ë„¤ê°€ ì‘ì›í•´ì¤„ ë•Œ í˜ì´ ë‚˜. ë„ˆ ë•Œë¬¸ì— ë” ì—´ì‹¬íˆ í•˜ê²Œ ë¼.',
                        choices: [
                            { text: 'ë‚˜ë„ ë„¤ ëª¨ìŠµ ë³´ë©´ í˜ ë‚˜', affection: 4 },
                            { text: 'í•­ìƒ ì‘ì›í• ê²Œ!', affection: 3 },
                            { text: '(ì† ì¡ìœ¼ë©°) í•¨ê»˜ í•˜ì', affection: 5 }
                        ]
                    },
                    {
                        scene: 'ğŸŒ…',
                        speaker: 'ë°•í•œ',
                        text: '(ìˆ˜ì¤ê²Œ) ë„ˆ... ë‚˜ ì¢‹ì•„í•´? ë‚˜ë„ ë„ˆ ì—„ì²­ ì¢‹ì•„í•˜ê±°ë“ ...',
                        choices: [
                            { text: 'ì‘, ë§ì´ ì¢‹ì•„í•´', affection: 5 },
                            { text: '(ë³¼ ë½€ë½€) ì´ê²Œ ë‹µì´ì•¼', affection: 5 },
                            { text: 'ë‚˜ë„ ë„ ì¢‹ì•„í•´!', affection: 4 }
                        ]
                    },
                    {
                        scene: 'ğŸ’–',
                        speaker: 'ë°•í•œ',
                        text: '(í™˜í•˜ê²Œ ì›ƒìœ¼ë©°) ì•¼í˜¸! ìš°ë¦¬ ì‚¬ê·€ëŠ” ê±°ì•¼? ì§„ì§œ?',
                        choices: [
                            { text: '(ì›ƒìœ¼ë©°) ë‹¹ì—°í•˜ì§€!', affection: 5 },
                            { text: 'í‰ìƒ ë„ˆë‘ ê°™ì´ ìˆì„ ê±°ì•¼', affection: 5 },
                            { text: 'ì‚¬ë‘í•´, ë°•í•œì•„', affection: 5 }
                        ]
                    }
                ]
            }
        };

        function showCharacterSelect() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('characterSelect').classList.add('active');
            document.getElementById('gameScreen').classList.remove('active');
            document.getElementById('endingScreen').classList.remove('active');
            affection = 0;
            currentEpisode = 1;
        }

        function selectCharacter(charId) {
            currentCharacter = characters[charId];
            document.getElementById('characterSelect').classList.remove('active');
            document.getElementById('gameScreen').classList.add('active');
            
            document.getElementById('currentIcon').textContent = currentCharacter.icon;
            document.getElementById('currentName').textContent = currentCharacter.name;
            document.getElementById('currentTrait').textContent = currentCharacter.trait;
            
            showEpisode(0);
        }

        function showEpisode(index) {
            if (index >= currentCharacter.story.length) {
                showEnding();
                return;
            }

            const episode = currentCharacter.story[index];
            document.getElementById('sceneImage').textContent = episode.scene;
            document.getElementById('speakerName').textContent = episode.speaker;
            document.getElementById('dialogueText').textContent = episode.text;
            document.getElementById('affection').textContent = affection;
            document.getElementById('episode').textContent = currentEpisode;

            const choicesContainer = document.getElementById('choicesContainer');
            choicesContainer.innerHTML = '';

            episode.choices.forEach((choice, i) => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.textContent = choice.text;
                btn.onclick = () => makeChoice(index, choice.affection);
                choicesContainer.appendChild(btn);
            });
        }

        function makeChoice(currentIndex, affectionGain) {
            affection += affectionGain;
            currentEpisode++;
            
            setTimeout(() => {
                showEpisode(currentIndex + 1);
            }, 300);
        }

        function showEnding() {
            document.getElementById('gameScreen').classList.remove('active');
            document.getElementById('endingScreen').classList.add('active');

            let endingData;
            if (affection >= 18) {
                endingData = {
                    icon: 'ğŸ’˜',
                    title: 'True Love Ending',
                    message: `${currentCharacter.name}ì™€ ë‹¹ì‹ ì€ ì„œë¡œì˜ ì§„ì‹¬ì„ í™•ì¸í•˜ê³  ì˜ì›í•œ ì‚¬ë‘ì„ ì•½ì†í–ˆìŠµë‹ˆë‹¤. ë‘ ì‚¬ëŒì˜ ë¯¸ë˜ëŠ” í–‰ë³µìœ¼ë¡œ ê°€ë“í•©ë‹ˆë‹¤.`
                };
            } else if (affection >= 12) {
                endingData = {
                    icon: 'ğŸ’•',
                    title: 'Sweet Romance Ending',
                    message: `${currentCharacter.name}ì™€ ë‹¹ì‹ ì€ ì„¤ë ˆëŠ” ì—°ì• ë¥¼ ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ì•ìœ¼ë¡œ ë” ë§ì€ ì¶”ì–µì„ ë§Œë“¤ì–´ê°ˆ ê±°ì˜ˆìš”.`
                };
            } else {
                endingData = {
                    icon: 'ğŸ’Œ',
                    title: 'Friendship Ending',
                    message: `${currentCharacter.name}ì™€ ë‹¹ì‹ ì€ ì†Œì¤‘í•œ ì¹œêµ¬ë¡œ ë‚¨ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë•Œë¡œëŠ” ìš°ì •ë„ ì•„ë¦„ë‹¤ìš´ ì¸ì—°ì…ë‹ˆë‹¤.`
                };
            }

            document.getElementById('endingIcon').textContent = endingData.icon;
            document.getElementById('endingTitle').textContent = endingData.title;
            document.getElementById('endingMessage').textContent = endingData.message;
        }

        function restart() {
            affection = 0;
            currentEpisode = 1;
            currentCharacter = null;
            document.getElementById('endingScreen').classList.remove('active');
            document.getElementById('startScreen').style.display = 'block';
        }
    </script>
</body>
</html>